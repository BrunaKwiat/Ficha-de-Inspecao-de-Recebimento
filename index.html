<!doctype html>
<html lang="pt-BR" data-theme="claro">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RQ-504-01 ‚Äî Ficha de Inspe√ß√£o de Recebimento</title>
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#0E3554" />

  <!-- CSS externo -->
  <link rel="stylesheet" href="style.css" />

  <!-- jsPDF + AutoTable (carregue APENAS uma vez cada) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <!-- Script principal (externo) -->
  <script defer src="script.js"></script>
</head>

<body>
  <noscript>
    <div class="noscript">
      ‚ö†Ô∏è Ative o JavaScript para usar salvar, PDF, adicionar linhas e outros recursos.
    </div>
  </noscript>

  <!-- Skip link -->
  <a class="sr-only sr-only-focusable" href="#conteudo">Pular para o conte√∫do</a>

  <!-- Topbar -->
  <header class="topbar" role="banner">
    <div class="container topbar__inner">
      <div class="brand">
        <img src="shiva.png" alt="Shiva Conex√µes ‚Äî Logo" />
        <div class="brand-text">
          <h1 class="brand-title">RQ-504-01 ‚Äî Ficha de Inspe√ß√£o de Recebimento</h1>
        </div>
      </div>

      <nav class="actions" aria-label="A√ß√µes do relat√≥rio">
        <ul class="btn-group-list">
          <li><button id="btnSalvar" class="btn btn--primary" type="button">üíæ Salvar</button></li>
          <li>
            <button id="btnPDF" class="btn btn--secondary" type="button">üìÑ PDF</button>
            <button id="btnImprimir" class="btn btn--secondary" type="button">üñ® Imprimir</button>
          </li>
          <li><button id="btnTemas" class="btn btn--secondary" type="button">üé® Temas</button></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Layout -->
  <main class="layout" id="app" role="main">
    <div class="container">

      <!-- Toasts ARIA -->
      <div id="ariaLive" class="sr-only" aria-live="polite" aria-atomic="true"></div>

      <!-- Lista de relat√≥rios -->
      <aside class="lista-relatorios" aria-labelledby="tituloRelatorios">
        <div class="aside-head">
          <h2 id="tituloRelatorios">Relat√≥rios</h2>
          <div class="search-group">
            <label for="filtroLista" class="sr-only">Buscar relat√≥rios</label>
            <input id="filtroLista" type="search" placeholder="Buscar..." autocomplete="off" inputmode="search" />
            <button id="btnBuscarRelatorio" class="btn btn--secondary" type="button"
              aria-label="Buscar relat√≥rio">üîé</button>
          </div>
        </div>
        <ul id="listaRelatorios" aria-live="polite"></ul>
      </aside>

      <!-- Conte√∫do principal -->
      <section class="conteudo" id="conteudo" tabindex="-1">
        <form id="formRelatorio" novalidate>
          <!-- Identifica√ß√£o -->
          <fieldset>
            <legend>Identifica√ß√£o</legend>
            <div class="grid-identificacao">
              <div class="field short">
                <label for="notafiscal">N¬∫ Nota Fiscal</label>
                <input type="text" id="notafiscal" name="notafiscal" required inputmode="numeric"
                  pattern="^[0-9]{1,}$" autocomplete="off" placeholder="Ex.: 000123" />
              </div>
              <div class="field">
                <label for="fornecedor">Fornecedor</label>
                <input type="text" id="fornecedor" name="fornecedor"
                  inputmode="none" />
              </div>
              <div class="field">
                <label for="datadopedido">N¬∞ e data do Pedido OC:</label>
                <input type="text" id="datadopedido" name="datadopedido"
                  readonly aria-readonly="true" inputmode="none" />
              </div>
             <div class="field">
                <label for="dataemiss√£o">Data da Emiss√£o</label>
                <input type="date" id="dataemiss√£o" name="dataemiss√£o" required />
              </div>
              <div class="field">
                <label for="dataentrega">Data de Entrega</label>
                <input type="date" id="dataentrega" name="dataentrega" required />
              </div>
            </div>
          </fieldset>

          <!-- Produtos -->
          <fieldset>
            <legend>Produtos</legend>
            <table id="tabelaProdutos">
              <colgroup>
                <col style="width: 38%" />
                <col style="width: 18%" />
                <col style="width: 18%" />
                <col style="width: 18%" />
                <col style="width: 8%" />
              </colgroup>
              <thead>
                <tr>
                  <th scope="col">Produto</th>                                  
                  <th scope="col">Quantidade</th>
                  <th scope="col">Lote</th>  
                  <th scope="col">A√ß√£o</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <input type="search" name="descricao[]" list="produtosSug" required placeholder="Produto"
                      autocomplete="on" />
                    <datalist id="produtosSug">
                      <option value="Tubo PVC ESG 100 MM" />
                      <option value="Tubo PVC ESG LEVE 250 MM" />
                      <option value="Tubo PVC ESG LEVE 300 MM" />
                      <option value="Tubo PVC SERIE R 100 MM "/>
                      <option value="Tubo PVC PBA CL 20 JEI DN 75 DE 85"/>
                      <option value="Tubo PVC COLETOR ESG JEI 100 MM"/>
                    </datalist>
                  </td>
                  <td>
                    <input type="text" name="lote[]" placeholder="Ex.: L2025-09" autocapitalize="characters"
                      pattern="^[A-Za-z0-9_-]{1,}$" />
                  </td>              
                  <td><input type="number" name="quantidade[]" min="1" step="1" inputmode="numeric" /></td>
                  <td><button type="button" class="remover" aria-label="Remover linha">‚ùå</button></td>
                </tr>
              </tbody>
            </table>
            <div class="table-actions">
              <button type="button" id="addLinha" class="btn">‚ûï Adicionar linha</button>
            </div>
          </fieldset>

          <!-- Ensaios -->
          <fieldset>
            <legend>Verifica√ß√£o</legend>
            <table id="tabelaEnsaios">
              <colgroup>
                <col style="width: 30%" />
                <col style="width: 15%" />
                <col style="width: 35%" />
                <col style="width: 12%" />
                <col style="width: 8%" />
              </colgroup>
              <thead>
                <tr>
                  <th scope="col">Verifica√ß√£o</th>                  
                  <th scope="col">Resultado</th>
                  <th scope="col">A√ß√£o</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <select name="verifica√ß√£o[]" required>
                      <option value="">Selecione...</option>
                      <option value="quantidade">A Quantidade est√° conforme o pedido?</option>
                      <option value="prazo">O prazo de entrega est√° conforme combinado?</option>
                      <option value="dimensional">A Qualidade dos produtos est√° conforme?</option>
                      <option value="marcacoes">Os pre√ßos est√£o conforme o Pedido de Compra</option>
                      <option value="achatamento">As informa√ß√µes da NF est√£o conforme ok.(impostos ICMS, ST, IPI, OBS)</option>
                      <option value="calor">Inspe√ß√£o Visual do Material, est√° ok?</option>
                      <option value="impacto">Inspe√ß√£o Dimensional do material, est√° ok</option>
                      <option value="estanquiedade_anel">Prazo de Validade, est√° ok?</option>                      
                    </select>
                  </td>
                  
                  
                  <td>
                    <select name="resultado[]" required>
                      <option value="">Selecione...</option>
                      <option value="aprovado">Aprovado</option>
                      <option value="reprovado">Reprovado</option>
                    </select>
                  </td>
                  <td><button type="button" class="remover" aria-label="Remover linha">‚ùå</button></td>
                </tr>
              </tbody>
            </table>
            <div class="table-actions">
              <button type="button" id="addEnsaio" class="btn">‚ûï Adicionar linha</button>
            </div>
          </fieldset>

          <!-- OBSERVA√á√ïES + NORMAS -->
          <fieldset>
            <legend>Observa√ß√µes e Normas</legend>
            <div class="field">
              <label for="observacoes">Observa√ß√µes</label>
              <textarea id="observacoes" name="observacoes" rows="3" placeholder="Registre observa√ß√µes relevantes..."
                spellcheck="true"></textarea>
            </div>            
          </fieldset>

          <!-- FOTOS -->
          <fieldset>
            <legend>Anexar Fotos</legend>

            <div class="upload-area" id="uploadArea" aria-describedby="uploadHint">
              <p>Arraste suas fotos aqui ou</p>
              <input type="file" id="fileInput" class="file-input" accept="image/*" multiple name="fotos[]" />
              <label for="fileInput" class="upload-btn">Selecionar Fotos</label>
              <p class="note" id="uploadHint">Formatos: JPG, PNG. M√°x: 5MB cada.</p>
            </div>

            <div class="image-preview" id="imagePreview" aria-live="polite"></div>
          </fieldset>
        </form>
      </section>
    </div>
  </main>

  <!-- Rodap√© -->
  <footer class="rodape" role="contentinfo">
    <div class="container">
      <small>¬© <span id="ano"></span> Shiva Conex√µes ‚Äî Relat√≥rios digitais.</small>
    </div>
  </footer>

  <!-- Di√°logo Temas -->
  <dialog id="dlgTemas" aria-labelledby="dlgTemasTitle">
    <form method="dialog" id="formTemas">
      <header>
        <strong id="dlgTemasTitle">Escolher tema</strong>
        <button type="button" id="btnFecharDlg" aria-label="Fechar">‚úñ</button>
      </header>

      <div class="temas-options">
        <label><input type="radio" name="tema" value="claro" checked><span class="swatch swatch--claro"></span>
          Claro</label>
        <label><input type="radio" name="tema" value="escuro"><span class="swatch swatch--escuro"></span> Escuro</label>
        <label><input type="radio" name="tema" value="marinho"><span class="swatch swatch--marinho"></span>
          Marinho</label>
        <label><input type="radio" name="tema" value="sepia"><span class="swatch swatch--sepia"></span> S√©pia</label>
      </div>

      <footer>
        <button type="button" class="btn" id="btnCancelarDlg">Cancelar</button>
        <button type="submit" class="btn btn--primary">Aplicar</button>
      </footer>
    </form>
  </dialog>
  </body>

</html>